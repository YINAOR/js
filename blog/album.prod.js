function throttle(e,i){let t=0;return function(){let a=Date.now(),n=this,l=arguments;a-t>i&&(e.apply(n,l),t=a)}}function openViewer(){$("#album-item-viewer").addClass("in"),closeViewer()}function closeViewer(){$("#album-item-viewer").one("click",function(e){$(this).removeClass("in"),$(".viewer-img img").attr("src","")})}function loadMore(){axios.get(`/album/loadMore?skip=${skip}&limit=${limit}`).then(e=>{skip+=5,loadingStatus=!1,appendChild(e)}).catch(function(e){console.log(e)})}function appendChild(e){let i=e.data.list;0!==i.length?(i.forEach((e,i)=>{let t;e.urls&&(t=$('<div class="album-item-content"><div class="swiper-container"><div class="swiper-wrapper"></div></div></div>'),e.urls.forEach(e=>{let i=$(`<div class="swiper-slide"><img data-src="${e.imgUrl}" src="${e.thumbnailUrl}"album-date/></div>`);t.find(".swiper-wrapper").append(i)}));let a=$(`<div class="album-item"><span class="album-date"> —— ${e.date}</span><p>${e.content}</p></div>`);t&&a.find("p").last().after(t),$(".album").append(a)}),swiper=new Swiper(".swiper-container",{slidesPerView:4,spaceBetween:30})):loadingStatus=!0}var swiper=new Swiper(".swiper-container",{slidesPerView:4,spaceBetween:30});$(".album").on("click",throttle(function(e,i){if("IMG"===e.target.nodeName){var t=$(e.target).attr("data-src");$(".viewer-img img").attr("src",t),openViewer()}},500));let skip=10,limit=5,loadingStatus=!1;$(document).unbind("scroll").bind("scroll",function(e){loadingStatus||$(this).height()-50<=$(this).scrollTop()+$(this.body).height()&&(loadingStatus=!0,loadMore())});
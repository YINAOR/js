"use strict";var scrolledUp,nextSlide,animation=!1,total=0,curSlide=1,envelope=[],mailbox=[];function search(t){axios.get("/letter/searchByName?addressee=".concat(t)).then(function(e){envelope=e.data.filter(function(e){return t==e.addressee}),0<(total=envelope.length)?($(".envelope-container .number").text(total),$(".post:last-child").text("有".concat(total,"封信，快打开看看吧")),$(".envelope-container").addClass("in"),initLetter(total,envelope),showLetterTo(1,envelope)):($(".envelope-container").removeClass("in"),$(".post:last-child").text("很可惜没有呢，去别处逛逛吧"))}).catch(function(e){console.log(e)})}function initLetter(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(0!==e)for(var t=0;t<e;t++)$("<li>",{"data-target":t+1,class:0==t?"pages__item pages__item--1 page__item-active":"pages__item pages__item--"+(t+1),click:function(){if(event.stopPropagation(),!animation){var e=+$(this).attr("data-target");pagination(curSlide,e),curSlide=e}}}).appendTo(".pages__list")}function showLetterTo(){var t=1<arguments.length?arguments[1]:void 0,e=2<arguments.length?arguments[2]:void 0,l=Number(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1);e?($(".l-slide").removeClass("slideDownT"),$(".l-slide").removeClass("slideUpT"),$(".l-slide").addClass("slideUpF"),setTimeout(function(){total<l&&(l=total);var e=t[l-1];$(".l-addressee").text("To ："+e.addressee),$(".l-title").text(e.title),$(".l-content").html(e.content),$(".l-date").text(e.date),$(".l-slide").removeClass("slideUpF"),$(".l-slide").addClass("slideDownT")},500)):($(".l-slide").removeClass("slideDownT"),$(".l-slide").removeClass("slideUpT"),$(".l-slide").addClass("slideDownF"),setTimeout(function(){total<l&&(l=total);var e=t[l-1];$(".l-addressee").text("To ："+e.addressee),$(".l-title").text(e.title),$(".l-content").html(e.content),$(".l-date").text(e.date),$(".l-slide").removeClass("slideDownF"),$(".l-slide").addClass("slideUpT")},500))}function throttle(l,i){var a=0;return function(){var e=Date.now(),t=arguments;i<e-a&&(l.apply(this,t),a=e)}}function pagination(e,t){e!=t&&(animation=!0,nextSlide=void 0===t?scrolledUp?e-1:e+1:t,$(".pages__item--"+nextSlide).addClass("page__item-active"),$(".pages__item--"+e).removeClass("page__item-active"),e<nextSlide&&showLetterTo(nextSlide,envelope,!1),nextSlide<e&&showLetterTo(nextSlide,envelope,!0),setTimeout(function(){animation=!1},500))}function navigateDown(){total-1<curSlide||(scrolledUp=!1,pagination(curSlide),curSlide++)}function navigateUp(){1!==curSlide&&(scrolledUp=!0,pagination(curSlide),curSlide--)}$("#envelope-search").keyup(function(e){13==e.keyCode&&($(".pages__list").empty(),total=0,curSlide=1,search(e.target.value))}),$(".overlay").on("click",throttle(function(){$("input#switch-on").prop("checked",!1)},500)),$(".letter").on("click",function(){event.stopPropagation()}),$(".overlay").on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta;animation||(0<t||e.originalEvent.detail<0?navigateUp():navigateDown())});